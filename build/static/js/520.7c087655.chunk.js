"use strict";(self.webpackChunkbplog=self.webpackChunkbplog||[]).push([[520,904,170,727],{4453:(e,s,t)=>{t.d(s,{Z:()=>l});t(2791);var a=t(184);const l=e=>{let{text:s,type:t,onClick:l,className:r,style:i,disabled:n}=e;return(0,a.jsx)("button",{type:t,className:r,onClick:l,style:i,disabled:n,children:s})}},7520:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(2791),l=(t(3170),t(5727),t(7904),t(4453)),r=t(7418),i=t(2506),n=t(2968),o=t(5048),c=t(7689),m=t(593),d=t(4471),u=t(2901),h=t(8152),f=t(184);const p=e=>{let{user:s}=e;const[t,p]=(0,a.useState)(!0),[x,j]=(0,a.useState)({}),{showDialog:g}=(0,d.R)(),N=(0,c.s0)(),b=(0,o.I0)(),v=(0,n.Z)();(0,a.useEffect)((()=>{u.Z.getOne(s.id).then((e=>{e.height=e.height?e.height:"",e.weight=e.weight?e.weight:"",e.medInput="",j(e),p(!1)})).catch((e=>{g(e.response.data.error,"message","error"),N(-1)}))}),[]);const w=()=>{const e=[];e.push((0,f.jsx)("option",{label:v.forms.settings.birthSelect},"default"));for(let s=(new Date).getFullYear();s>=1900;s--)e.push((0,f.jsx)("option",{value:s,children:s},s));return e},y=e=>{const s=e.values.medInput.substring(0,1).toUpperCase().concat(e.values.medInput.substring(1));""!==e.values.medInput&&(e.setFieldValue("medList",[...e.values.medList,s]),e.setFieldValue("medInput",""))};return t?(0,f.jsx)(h.Z,{}):(0,f.jsx)("div",{className:"data-container",children:(0,f.jsx)(i.J9,{initialValues:x,onSubmit:async e=>{try{const s=await u.Z.update(e);b((0,m.Ev)(s)),g(v.forms.settings.notification,"message"),N(-1)}catch(s){console.log("expection in UserPage",s)}},children:e=>(0,f.jsxs)(i.l0,{className:"form",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"firstName",children:v.forms.settings.first}),(0,f.jsx)(i.gN,{className:"formField",type:"text",id:"firstName",name:"firstName"}),(0,f.jsx)(i.Bc,{name:"firstName",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"lastName",children:v.forms.settings.last}),(0,f.jsx)(i.gN,{className:"formField",type:"text",id:"lastName",name:"lastName"}),(0,f.jsx)(i.Bc,{name:"lastName",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"birthYear",children:v.forms.settings.birth}),(0,f.jsx)(i.gN,{className:"formField",as:"select",id:"birthYear",name:"birthYear",children:w()}),(0,f.jsx)(i.Bc,{name:"birthYear",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"height",children:v.forms.settings.height}),(0,f.jsx)(i.gN,{className:"formField",type:"number",id:"height",name:"height"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"weight",children:v.forms.settings.weight}),(0,f.jsx)(i.gN,{className:"formField",type:"number",id:"weight",name:"weight"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"medList",children:v.forms.settings.medList}),(0,f.jsx)(i.gN,{placeholder:v.forms.settings.medListPlaceholder,onKeyPress:s=>{13===s.which&&(s.preventDefault(),y(e))},name:"medInput"}),(0,f.jsx)(l.Z,{style:{marginLeft:"1em"},className:"util-btn",type:"button",text:v.forms.settings.add,disabled:""===e.values.medInput,onClick:()=>y(e)}),(0,f.jsx)(i.gN,{className:"formField medSelect",placeholder:v.forms.select.placeHolder,component:r.ZP,name:"medSelect",isMulti:!0,value:e.values.medList.map((e=>({value:e,label:e}))),onChange:s=>{window.confirm(v.forms.settings.remConf)&&e.setFieldValue("medList",s.map((e=>e.value)))},onClick:s=>{let{target:t}=s;e.setFieldValue("medSelect",t.value)}})]}),(0,f.jsxs)("div",{className:"link-group",children:[(0,f.jsx)(l.Z,{text:v.forms.settings.submit,type:"submit",className:"button"}),(0,f.jsx)(l.Z,{text:v.forms.settings.cancel,type:"button",onClick:()=>N(-1),className:"button"})]})]})})})},x=()=>{const[e]=(0,o.v9)((e=>[e.login]));return(0,f.jsx)(p,{user:e})}},3170:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(2791),l=t(4483),r=t(3174),i=t(2506),n=t(2968),o=t(5048),c=t(593),m=t(7418),d=t(4453),u=t(2901),h=t(9314),f=t(184);const p=e=>{let{closeModal:s}=e;const[t,p]=(0,a.useState)(null),[x,j]=(0,a.useState)(!1),g=(0,o.I0)(),N=(0,n.Z)(),b=()=>{const e=[];e.push((0,f.jsx)("option",{label:N.forms.createAccount.birthSelect},"default"));for(let s=(new Date).getFullYear();s>=1900;s--)e.push((0,f.jsx)("option",{value:s,children:s},s));return e},v=e=>{if(""!==e.values.medInput){const s=e.values.medInput.substring(0,1).toUpperCase().concat(e.values.medInput.substring(1));e.setFieldValue("medList",[...e.values.medList,s]),e.setFieldValue("medInput","")}},w={display:x?"none":""},y={display:x?"":"none"};return(0,f.jsx)(i.J9,{initialValues:{firstName:"",lastName:"",birthYear:"",username:"",password:"",passwordConf:"",medInput:"",height:"",weight:"",medList:[]},onSubmit:async e=>{try{await u.Z.create(e);const t=await h.Z.login({username:e.username,password:e.password});g((0,c.x4)(t)),p(null),s()}catch(t){p("".concat(N.forms.createAccount.err.nameTaken[0]).concat(e.username).concat(N.forms.createAccount.err.nameTaken[1]))}},validate:e=>{const s={},t=["medList","medInput","medSelect","height","weight"];for(let a in e)t.includes(a)||e[a]||(s[a]=N.forms.err.empty);return""!==e.password&&e.password.length<6&&(s.password=N.forms.createAccount.err.pwdShort),e.password!==e.passwordConf&&(s.passwordConf=N.forms.createAccount.err.pwdConf),s},children:e=>(0,f.jsxs)(i.l0,{className:"form",children:[(0,f.jsxs)("div",{style:w,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"firstName",children:N.forms.createAccount.first}),(0,f.jsx)(i.gN,{className:"formField",type:"text",id:"firstName",name:"firstName",autoFocus:!0}),(0,f.jsx)(i.Bc,{name:"firstName",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"lastName",children:N.forms.createAccount.last}),(0,f.jsx)(i.gN,{className:"formField",type:"text",id:"lastName",name:"lastName"}),(0,f.jsx)(i.Bc,{name:"lastName",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"birthYear",children:N.forms.createAccount.birth}),(0,f.jsx)(i.gN,{className:"formField",as:"select",id:"birthYear",name:"birthYear",children:b()}),(0,f.jsx)(i.Bc,{name:"birthYear",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"username",children:N.forms.createAccount.user}),(0,f.jsx)(i.gN,{className:"formField",type:"text",id:"username",name:"username"}),(0,f.jsx)(i.Bc,{name:"username",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"password",children:N.forms.createAccount.pwd}),(0,f.jsx)(i.gN,{className:"formField",type:"password",id:"password",name:"password"}),(0,f.jsx)(i.Bc,{name:"password",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"passwordConf",children:N.forms.createAccount.pwdConf}),(0,f.jsx)(i.gN,{className:"formField",type:"password",id:"passwordConf",name:"passwordConf"}),(0,f.jsx)(i.Bc,{name:"passwordConf",component:"div",className:"formik_error"})]}),(0,f.jsx)("div",{className:"flex-cont",style:{padding:0,justifyContent:"flex-end"},onClick:()=>{e.validateForm().then((s=>{0===Object.keys(s).length?j(!x):(console.log("touched: ",e.touched),e.setTouched({...s}))}))},children:(0,f.jsx)("div",{className:"icon-div",children:(0,f.jsx)(l.G,{icon:r.eFW})})})]}),(0,f.jsxs)("div",{style:y,children:[(0,f.jsx)("div",{className:"flex-cont",style:{padding:0,justifyContent:"flex-start"},onClick:()=>j(!x),children:(0,f.jsx)("div",{className:"icon-div",children:(0,f.jsx)(l.G,{icon:r.acZ})})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"height",children:N.forms.createAccount.height}),(0,f.jsx)(i.gN,{className:"formField",type:"number",id:"height",name:"height"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"weight",children:N.forms.createAccount.weight}),(0,f.jsx)(i.gN,{className:"formField",type:"number",id:"weight",name:"weight"})]}),(0,f.jsx)("div",{className:"instruction",children:(0,f.jsx)("p",{children:(0,f.jsx)("i",{children:N.forms.createAccount.instr})})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"medList",children:N.forms.createAccount.medList}),(0,f.jsx)(i.gN,{placeholder:N.forms.createAccount.medListPlaceholder,onKeyPress:s=>{13===s.which&&(s.preventDefault(),v(e))},name:"medInput"}),(0,f.jsx)(d.Z,{style:{marginLeft:"1em"},className:"util-btn",type:"button",text:N.forms.createAccount.add,disabled:""===e.values.medInput,onClick:()=>v(e)}),(0,f.jsx)(i.gN,{className:"formField medSelect",placeholder:N.forms.select.placeHolder,component:m.ZP,name:"medSelect",isMulti:!0,value:e.values.medList.map((e=>({value:e,label:e}))),onChange:s=>{window.confirm(N.forms.createAccount.remConf)&&e.setFieldValue("medList",s.map((e=>e.value)))},onClick:s=>{let{target:t}=s;e.setFieldValue("medSelect",t.value)}})]}),(0,f.jsx)(d.Z,{className:"button",text:N.forms.createAccount.submit,type:"submit",disabled:!x&&!0}),t&&(0,f.jsx)("div",{name:"credentials",component:"div",className:"formik_error",children:t})]})]})})}},5727:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(2791),l=t(5048),r=t(2968),i=t(2506),n=t(593),o=t(9314),c=t(4453),m=t(184);const d=e=>{let{closeModal:s}=e;const[t,d]=(0,a.useState)(null),u=(0,l.I0)(),h=(0,r.Z)();return(0,m.jsx)(i.J9,{initialValues:{username:"",password:""},onSubmit:async e=>{try{const t=await o.Z.login(e);u((0,n.x4)(t)),d(null),s()}catch(t){console.log("virhe",t),d(h.forms.login.err)}},validate:e=>{const s={};for(let t in e)e[t]||(s[t]=h.forms.err.empty);return s},children:(0,m.jsxs)(i.l0,{className:"form",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"username",children:h.forms.login.user}),(0,m.jsx)(i.gN,{className:"formField",type:"text",id:"username",name:"username",autoFocus:!0}),(0,m.jsx)(i.Bc,{name:"username",component:"div",className:"formik_error"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"password",children:h.forms.login.pwd}),(0,m.jsx)(i.gN,{className:"formField",type:"password",id:"password",name:"password"}),(0,m.jsx)(i.Bc,{name:"password",component:"div",className:"formik_error"})]}),t&&(0,m.jsx)("div",{name:"credentials",component:"div",className:"formik_error",children:t}),(0,m.jsx)(c.Z,{className:"button",text:h.forms.login.log,type:"submit"})]})})}},7904:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});t(2791);var a=t(9513),l=t.n(a),r=t(7418),i=t(2506),n=t(9477),o=t(6276),c=t(2968),m=t(5048),d=t(1866),u=t(4471),h=t(4453),f=(t(8639),t(184));const p=e=>{let{closeModal:s,initialValues:t}=e;const{showDialog:a}=(0,u.R)(),p=(0,m.v9)((e=>e.login.medList)),x=(0,m.I0)(),j=(0,c.Z)(),g=new Date;t=t?{...t,time:t.time.substring(0,5)}:{date:(0,d.p6)(g),time:(0,d.mr)(g),systolic:"",diastolic:"",pulse:"",meds:[]};const N=p?p.map((e=>({value:e,label:e}))):[];return(0,f.jsx)(i.J9,{initialValues:t,onSubmit:e=>{"id"in e?(0!==e.pulse&&""!==e.pulse||(e.pulse="-"),x((0,n.ld)(e)),a(j.forms.update.updated,"message")):(e.monthObjectKey=(0,d.vI)(e.date),x((0,n.Yo)(e)),x((0,o.q0)(e.monthObjectKey))),s()},validate:e=>{const s={};for(let t in e)"notes"!==t&&"meds"!==t&&"pulse"!==t&&(e[t]||(s[t]=j.forms.err.empty));return(Number(e.systolic)<90||Number(e.systolic)>250)&&(s.systolic="".concat(j.forms.err.outOfBounds,"(90-250)")),(Number(e.diastolic)<40||Number(e.diastolic)>120)&&(s.diastolic="".concat(j.forms.err.outOfBounds,"(40-120)")),s},children:e=>{let{values:s,setFieldValue:a}=e;return(0,f.jsxs)(i.l0,{className:"form",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"date",children:j.forms.newRecord.date}),(0,f.jsx)(l(),{className:"formField",id:"date",name:"date",dateFormat:"dd/MM/yy",selected:new Date(s.date),onChange:e=>a("date",(0,d.p6)(e)),disabled:t.id})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"date",children:j.forms.newRecord.time}),(0,f.jsx)(i.gN,{className:"formField",type:"time",id:"time",name:"time"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"systolic",children:j.forms.newRecord.sys}),(0,f.jsx)(i.gN,{className:"formField",type:"number",min:"90",max:"250",id:"systolic",name:"systolic",autoFocus:!0}),(0,f.jsx)(i.Bc,{name:"systolic",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"diastolic",children:j.forms.newRecord.dia}),(0,f.jsx)(i.gN,{className:"formField",type:"number",min:"40",max:"120",id:"diastolic",name:"diastolic"}),(0,f.jsx)(i.Bc,{name:"diastolic",component:"div",className:"formik_error"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"pulse",children:j.forms.newRecord.pul}),(0,f.jsx)(i.gN,{className:"formField",type:"number",id:"pulse",name:"pulse"}),(0,f.jsx)(i.Bc,{name:"pulse",component:"div",className:"formik_error"})]}),(0,f.jsx)("label",{htmlFor:"meds",children:j.forms.newRecord.meds}),(0,f.jsx)(i.gN,{className:"formField",placeholder:j.forms.select.placeHolder,component:r.ZP,id:"meds",isMulti:!0,isSearchable:!1,options:N,name:"meds",defaultValue:t.meds.map((e=>({value:e,label:e[0].toUpperCase().concat(e.substring(1))}))),onChange:e=>{s.meds=e.map((e=>e.value))}}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"notes",children:j.forms.newRecord.notes}),(0,f.jsx)(i.gN,{className:"formField",as:"textarea",id:"notes",name:"notes"})]}),(0,f.jsx)(h.Z,{className:"button",text:j.forms.newRecord.submit,type:"submit"})]})}})}},4471:(e,s,t)=>{t.d(s,{R:()=>l});t(2791);let a;const l=()=>{const e=(e,s)=>{e.classList.add("visible"),e.childNodes[0].innerText=s},s=e=>{e.classList.remove("visible")},t=async(s,t,l)=>(e(s,t),new Promise((e=>{a=e}))),l=(t,a,l,r)=>{t.style.borderColor=r?"#f84f31":"#3f7e51",e(t,a),setTimeout((()=>{s(t)}),3e3)};return{showDialog:async function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=document.getElementById(a);if("confirm"===a){const a=await t(i,e);return s(i),a}l(i,e,0,r)},onConfirm:()=>{a(!0)},onCancel:()=>{a(!1)}}}},9314:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(4569),l=t.n(a);const r="/api/login",i={login:async e=>(await l().post(r,e)).data,checkToken:async e=>(await l().post("".concat(r,"/checkToken"),{token:e})).data}}}]);
//# sourceMappingURL=520.7c087655.chunk.js.map