"use strict";(self.webpackChunkbplog=self.webpackChunkbplog||[]).push([[170],{4453:(e,s,t)=>{t.d(s,{Z:()=>r});t(2791);var a=t(184);const r=e=>{let{text:s,type:t,onClick:r,className:n,style:l,disabled:c}=e;return(0,a.jsx)("button",{type:t,className:n,onClick:r,style:l,disabled:c,children:s})}},3170:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(2791),r=t(4483),n=t(3174),l=t(2506),c=t(2968),o=t(5048),i=t(593),d=t(7418),m=t(4453),u=t(2901),h=t(9314),p=t(184);const f=e=>{let{closeModal:s}=e;const[t,f]=(0,a.useState)(null),[x,j]=(0,a.useState)(!1),N=(0,o.I0)(),v=(0,c.Z)(),w=()=>{const e=[];e.push((0,p.jsx)("option",{label:v.forms.createAccount.birthSelect},"default"));for(let s=(new Date).getFullYear();s>=1900;s--)e.push((0,p.jsx)("option",{value:s,children:s},s));return e},b=e=>{if(""!==e.values.medInput){const s=e.values.medInput.substring(0,1).toUpperCase().concat(e.values.medInput.substring(1));e.setFieldValue("medList",[...e.values.medList,s]),e.setFieldValue("medInput","")}},g={display:x?"none":""},y={display:x?"":"none"};return(0,p.jsx)(l.J9,{initialValues:{firstName:"",lastName:"",birthYear:"",username:"",password:"",passwordConf:"",medInput:"",height:"",weight:"",medList:[]},onSubmit:async e=>{try{await u.Z.create(e);const t=await h.Z.login({username:e.username,password:e.password});N((0,i.x4)(t)),f(null),s()}catch(t){f("".concat(v.forms.createAccount.err.nameTaken[0]).concat(e.username).concat(v.forms.createAccount.err.nameTaken[1]))}},validate:e=>{const s={},t=["medList","medInput","medSelect","height","weight"];for(let a in e)t.includes(a)||e[a]||(s[a]=v.forms.err.empty);return""!==e.password&&e.password.length<6&&(s.password=v.forms.createAccount.err.pwdShort),e.password!==e.passwordConf&&(s.passwordConf=v.forms.createAccount.err.pwdConf),s},children:e=>(0,p.jsxs)(l.l0,{className:"form",children:[(0,p.jsxs)("div",{style:g,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"firstName",children:v.forms.createAccount.first}),(0,p.jsx)(l.gN,{className:"formField",type:"text",id:"firstName",name:"firstName",autoFocus:!0}),(0,p.jsx)(l.Bc,{name:"firstName",component:"div",className:"formik_error"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"lastName",children:v.forms.createAccount.last}),(0,p.jsx)(l.gN,{className:"formField",type:"text",id:"lastName",name:"lastName"}),(0,p.jsx)(l.Bc,{name:"lastName",component:"div",className:"formik_error"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"birthYear",children:v.forms.createAccount.birth}),(0,p.jsx)(l.gN,{className:"formField",as:"select",id:"birthYear",name:"birthYear",children:w()}),(0,p.jsx)(l.Bc,{name:"birthYear",component:"div",className:"formik_error"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"username",children:v.forms.createAccount.user}),(0,p.jsx)(l.gN,{className:"formField",type:"text",id:"username",name:"username"}),(0,p.jsx)(l.Bc,{name:"username",component:"div",className:"formik_error"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"password",children:v.forms.createAccount.pwd}),(0,p.jsx)(l.gN,{className:"formField",type:"password",id:"password",name:"password"}),(0,p.jsx)(l.Bc,{name:"password",component:"div",className:"formik_error"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"passwordConf",children:v.forms.createAccount.pwdConf}),(0,p.jsx)(l.gN,{className:"formField",type:"password",id:"passwordConf",name:"passwordConf"}),(0,p.jsx)(l.Bc,{name:"passwordConf",component:"div",className:"formik_error"})]}),(0,p.jsx)("div",{className:"flex-cont",style:{padding:0,justifyContent:"flex-end"},onClick:()=>{e.validateForm().then((s=>{0===Object.keys(s).length?j(!x):(console.log("touched: ",e.touched),e.setTouched({...s}))}))},children:(0,p.jsx)("div",{className:"icon-div",children:(0,p.jsx)(r.G,{icon:n.eFW})})})]}),(0,p.jsxs)("div",{style:y,children:[(0,p.jsx)("div",{className:"flex-cont",style:{padding:0,justifyContent:"flex-start"},onClick:()=>j(!x),children:(0,p.jsx)("div",{className:"icon-div",children:(0,p.jsx)(r.G,{icon:n.acZ})})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"height",children:v.forms.createAccount.height}),(0,p.jsx)(l.gN,{className:"formField",type:"number",id:"height",name:"height"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"weight",children:v.forms.createAccount.weight}),(0,p.jsx)(l.gN,{className:"formField",type:"number",id:"weight",name:"weight"})]}),(0,p.jsx)("div",{className:"instruction",children:(0,p.jsx)("p",{children:(0,p.jsx)("i",{children:v.forms.createAccount.instr})})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"medList",children:v.forms.createAccount.medList}),(0,p.jsx)(l.gN,{placeholder:v.forms.createAccount.medListPlaceholder,onKeyPress:s=>{13===s.which&&(s.preventDefault(),b(e))},name:"medInput"}),(0,p.jsx)(m.Z,{style:{marginLeft:"1em"},className:"util-btn",type:"button",text:v.forms.createAccount.add,disabled:""===e.values.medInput,onClick:()=>b(e)}),(0,p.jsx)(l.gN,{className:"formField medSelect",placeholder:v.forms.select.placeHolder,component:d.ZP,name:"medSelect",isMulti:!0,value:e.values.medList.map((e=>({value:e,label:e}))),onChange:s=>{window.confirm(v.forms.createAccount.remConf)&&e.setFieldValue("medList",s.map((e=>e.value)))},onClick:s=>{let{target:t}=s;e.setFieldValue("medSelect",t.value)}})]}),(0,p.jsx)(m.Z,{className:"button",text:v.forms.createAccount.submit,type:"submit",disabled:!x&&!0}),t&&(0,p.jsx)("div",{name:"credentials",component:"div",className:"formik_error",children:t})]})]})})}},9314:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(4569),r=t.n(a);const n="/api/login",l={login:async e=>(await r().post(n,e)).data,checkToken:async e=>(await r().post("".concat(n,"/checkToken"),{token:e})).data}}}]);
//# sourceMappingURL=170.9670b6a5.chunk.js.map